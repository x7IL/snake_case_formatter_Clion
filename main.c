#include <stdio.h>

/*
 *
 *gcc main.c
 * ./a.out "Nau Man's Land"
 * ./a.out " Andrey-lgun42 is a GORILLA " | cat -e
 * ./a.out "" | cat -e
 * ./a.out ; echo $?
 */

int my_strlen(char **tab){
    int a= 0;
    for(int i = 0; tab[1][i]!='\0';i++){
        a++;
    }
    return a;
}

int main(int argc, char ** tab) {
    switch (argc){
        case 1:
            return 84;
    }
    int a;
    //const char *tab= argv[1];
    a  = my_strlen(tab);
    switch (a) {
        case 0:
            printf("\n");
            return 0;
        default:
            for (int i = 0; tab[1][i] != '\0'; i++) {
                //printf((i == 0 && tab[1][i] == ' ' || (a-1 == i && tab[1][a-1] == ' ') ) ? "": (tab[1][i] >=65 && tab[1][i] <=90) ? "%c" : (tab[1][i] >= 97 && tab[1][i] <=122) ? "%c" : ((tab[1][i] >= 97 && tab[1][i] <=122) && (tab[1][i+1] >= 48 && tab[1][i+1] <=57)) ? tab[1][i] : " ", (i == 0 && tab[1][i] == ' ' || (a-1 == i && tab[1][a-1] == ' ') ) ? ' ': (tab[1][i] >=65 && tab[1][i] <=90) ? (tab[1][i] + 32) : (tab[1][i] >= 97 && tab[1][i] <=122) ? tab[1][i] : ((tab[1][i-1] >= 97 && tab[1][i-1] <=122) || (tab[1][i-1] >= 65 && tab[1][i-1] <=90)) && (tab[1][i] >= 48 && tab[1][i] <=57) ? tab[1][i] : ' ');
                if((i == 0 && tab[1][i] == ' ' || (a - 1 == i && tab[1][a - 1] == ' '))){
                    printf("");
                }
                else {
                    printf((tab[1][i] >= 65 && tab[1][i] <= 90) ? "%c" : (tab[1][i] >= 97 && tab[1][i] <= 122) ? "%c" :((tab[1][i - 1] >= 97 && tab[1][i] <= 122) ||(tab[1][i - 1] >= 65 && tab[1][i] <= 90)) &&(tab[1][i] >= 48 && tab[1][i] <= 57) ? "_%c" :((tab[1][i - 1] >= 97 && tab[1][i] <= 122) ||(tab[1][i - 1] >= 65 && tab[1][i] <= 90) ||(tab[1][i - 1] >= 48 && tab[1][i - 1] <= 57)) &&(tab[1][i] >= 48 && tab[1][i] <= 57) ? "%c" : "_",(tab[1][i] >= 65 && tab[1][i] <= 90) ? (tab[1][i] + 32) : (tab[1][i] >= 97 && tab[1][i] <= 122)? tab[1][i] : ((tab[1][i - 1] >= 97 &&tab[1][i] <= 122) ||(tab[1][i - 1] >= 65 &&tab[1][i] <= 90)) &&(tab[1][i] >= 48 &&tab[1][i] <= 57)? tab[1][i] :((tab[1][i - 1] >= 97 &&tab[1][i] <= 122) ||(tab[1][i - 1] >= 65 &&tab[1][i] <= 90) ||(tab[1][i - 1] >= 48 &&tab[1][i - 1] <=57)) &&(tab[1][i] >= 48 &&tab[1][i] <= 57)? tab[1][i] : ' ');
                }
            }
            return 0;
    }
}

/*
                if ((i == 0 && tab[1][i] == ' ' || (a - 1 == i && tab[1][a - 1] == ' '))) {
                    printf("");
                } else {
                    if ((tab[1][i] >= 65 && tab[1][i] <= 90)) {
                        printf("%c", (tab[1][i] + 32));
                    } else {
                        if ((tab[1][i] >= 97 && tab[1][i] <= 122)) {
                            printf("%c", tab[1][i]);
                        } else {
                            if (((tab[1][i - 1] >= 97 && tab[1][i] <= 122) || (tab[1][i - 1] >= 65 && tab[1][i] <= 90)) &&
                                (tab[1][i] >= 48 && tab[1][i] <= 57)) {
                                printf("_%c", tab[1][i]);
                            } else {
                                if (((tab[1][i - 1] >= 97 && tab[1][i] <= 122) ||
                                     (tab[1][i - 1] >= 65 && tab[1][i] <= 90) ||
                                     (tab[1][i - 1] >= 48 && tab[1][i - 1] <= 57)) &&
                                    (tab[1][i] >= 48 && tab[1][i] <= 57)) {
                                    printf("%c", tab[1][i]);
                                } else {
                                    printf("_");
                                }
                            }

                        }

                    }
                }
                 */
//write(1,i == 0 && tab[1][i] == ' ' || (a - 1 == i && tab[1][a - 1] == ' ') ? " ": (tab[1][i] >= 65 && tab[1][i] <= 90) ? (tab[1][i] + 32) : (tab[1][i] >= 97 && tab[1][i] <= 122) ? tab[1][i] : ((tab[1][i - 1] >= 97 && tab[1][i] <= 122) || (tab[1][i - 1] >= 65 && tab[1][i] <= 90)) &&(tab[1][i] >= 48 && tab[1][i] <= 57) ? tab[1][i] : ((tab[1][i - 1] >= 97 && tab[1][i] <= 122) || (tab[1][i - 1] >= 65 && tab[1][i] <= 90) || (tab[1][i-1] >= 48 && tab[1][i-1] <= 57)) && (tab[1][i] >= 48 && tab[1][i] <= 57) ? tab[1][i] : " ",a+1);

/*
    else {
        for (int i = 0; tab[1][i] != '\0'; i++) {
            //printf((i == 0 && tab[1][i] == ' ' || (a-1 == i && tab[1][a-1] == ' ') ) ? "": (tab[1][i] >=65 && tab[1][i] <=90) ? "%c" : (tab[1][i] >= 97 && tab[1][i] <=122) ? "%c" : ((tab[1][i] >= 97 && tab[1][i] <=122) && (tab[1][i+1] >= 48 && tab[1][i+1] <=57)) ? tab[1][i] : " ", (i == 0 && tab[1][i] == ' ' || (a-1 == i && tab[1][a-1] == ' ') ) ? ' ': (tab[1][i] >=65 && tab[1][i] <=90) ? (tab[1][i] + 32) : (tab[1][i] >= 97 && tab[1][i] <=122) ? tab[1][i] : ((tab[1][i-1] >= 97 && tab[1][i-1] <=122) || (tab[1][i-1] >= 65 && tab[1][i-1] <=90)) && (tab[1][i] >= 48 && tab[1][i] <=57) ? tab[1][i] : ' ');
            if((i == 0 && tab[1][i] == ' ' || (a - 1 == i && tab[1][a - 1] == ' '))){
                printf("");
            }
            else {
                printf((tab[1][i] >= 65 && tab[1][i] <= 90) ? "%c" : (tab[1][i] >= 97 && tab[1][i] <= 122) ? "%c" :
                                                                     ((tab[1][i - 1] >= 97 && tab[1][i] <= 122) ||
                                                                      (tab[1][i - 1] >= 65 && tab[1][i] <= 90)) &&
                                                                     (tab[1][i] >= 48 && tab[1][i] <= 57) ? "_%c" :
                                                                     ((tab[1][i - 1] >= 97 && tab[1][i] <= 122) ||
                                                                      (tab[1][i - 1] >= 65 && tab[1][i] <= 90) ||
                                                                      (tab[1][i - 1] >= 48 && tab[1][i - 1] <= 57)) &&
                                                                     (tab[1][i] >= 48 && tab[1][i] <= 57) ? "%c" : "_",
                       (tab[1][i] >= 65 && tab[1][i] <= 90) ? (tab[1][i] + 32) : (tab[1][i] >= 97 && tab[1][i] <= 122)
                                                                                 ? tab[1][i] : ((tab[1][i - 1] >= 97 &&
                                                                                                 tab[1][i] <= 122) ||
                                                                                                (tab[1][i - 1] >= 65 &&
                                                                                                 tab[1][i] <= 90)) &&
                                                                                               (tab[1][i] >= 48 &&
                                                                                                tab[1][i] <= 57)
                                                                                               ? tab[1][i] :
                                                                                               ((tab[1][i - 1] >= 97 &&
                                                                                                 tab[1][i] <= 122) ||
                                                                                                (tab[1][i - 1] >= 65 &&
                                                                                                 tab[1][i] <= 90) ||
                                                                                                (tab[1][i - 1] >= 48 &&
                                                                                                 tab[1][i - 1] <=
                                                                                                 57)) &&
                                                                                               (tab[1][i] >= 48 &&
                                                                                                tab[1][i] <= 57)
                                                                                               ? tab[1][i] : ' ');
            }

            if ((i == 0 && tab[1][i] == ' ' || (a - 1 == i && tab[1][a - 1] == ' '))) {
                printf("");
            } else {
                if ((tab[1][i] >= 65 && tab[1][i] <= 90)) {
                    printf("%c", (tab[1][i] + 32));
                } else {
                    if ((tab[1][i] >= 97 && tab[1][i] <= 122)) {
                        printf("%c", tab[1][i]);
                    } else {
                        if (((tab[1][i - 1] >= 97 && tab[1][i] <= 122) || (tab[1][i - 1] >= 65 && tab[1][i] <= 90)) &&
                            (tab[1][i] >= 48 && tab[1][i] <= 57)) {
                            printf("_%c", tab[1][i]);
                        } else {
                            if (((tab[1][i - 1] >= 97 && tab[1][i] <= 122) ||
                                 (tab[1][i - 1] >= 65 && tab[1][i] <= 90) ||
                                 (tab[1][i - 1] >= 48 && tab[1][i - 1] <= 57)) &&
                                (tab[1][i] >= 48 && tab[1][i] <= 57)) {
                                printf("%c", tab[1][i]);
                            } else {
                                printf("_");
                            }
                        }

                    }

                }
            }

            //write(1,i == 0 && tab[1][i] == ' ' || (a - 1 == i && tab[1][a - 1] == ' ') ? " ": (tab[1][i] >= 65 && tab[1][i] <= 90) ? (tab[1][i] + 32) : (tab[1][i] >= 97 && tab[1][i] <= 122) ? tab[1][i] : ((tab[1][i - 1] >= 97 && tab[1][i] <= 122) || (tab[1][i - 1] >= 65 && tab[1][i] <= 90)) &&(tab[1][i] >= 48 && tab[1][i] <= 57) ? tab[1][i] : ((tab[1][i - 1] >= 97 && tab[1][i] <= 122) || (tab[1][i - 1] >= 65 && tab[1][i] <= 90) || (tab[1][i-1] >= 48 && tab[1][i-1] <= 57)) && (tab[1][i] >= 48 && tab[1][i] <= 57) ? tab[1][i] : " ",a+1);
        }
    }
    */